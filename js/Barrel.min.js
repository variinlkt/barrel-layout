"use strict";var _createClass=function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(t,a.key,a)}}return function(i,e,a){if(e)t(i.prototype,e);if(a)t(i,a);return i}}();function _classCallCheck(t,i){if(!(t instanceof i)){throw new TypeError("Cannot call a class as a function")}}var Barrel=function(){function t(i){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:9.5;_classCallCheck(this,t);this.ct=i;this.baseNum=a;this.baseHeight=this.ct.offsetWidth/this.baseNum||e;this.maxWidth=i.offsetWidth;this.lastRowWidth=0;this.imgList=[];this.data=[];this.bind();this.imgArr=[]}_createClass(t,[{key:"createImg",value:function t(i){var e=this;var a=0;if(this.data.length==0){this.data=i.map(function(t){return t})}this.data.forEach(function(t,i){var n={};new Promise(function(e,a){n[i]=new Image;n[i].onload=function(){return e()};n[i].onerror=function(){return a()};n[i].src=t}).then(function(){var t=n[i].height;var s=n[i].width;var h=s/t;var r={self:n[i],width:e.baseHeight*h,height:e.baseHeight};e.render(r,a);a++}).catch(function(t){return console.log(t)})})}},{key:"render",value:function t(i,e){var a=this;var n=this.baseHeight,s=0,h=i,r=[];this.imgList.push(i);this.imgList.forEach(function(t,i){s+=t.width;if(a.maxWidth<s){a.imgList.pop();s-=h.width;n=a.maxWidth*a.baseHeight/s;a.createRow(n);a.imgList=[];a.imgList.push(h)}});if(e===this.data.length-1&&this.imgList.length!=0){r=this.imgList;r.forEach(function(t){s+=t.width;n=a.maxWidth*a.baseHeight/s});this.createRow(n);this.lastRowWidth=s}}},{key:"createRow",value:function t(i){var e=document.createElement("li"),a=document.createElement("div");a.style.height=i+"px";this.imgList.forEach(function(t){var n=t.self;n.style.height=i+"px";a.appendChild(n);e.appendChild(a)});this.ct.appendChild(e)}},{key:"bind",value:function t(){var i=this;window.addEventListener("resize",function(){i.ct.innerHTML="";i.maxWidth=i.ct.offsetWidth;i.lastRowWidth=0;i.imgList=[];i.baseHeight=i.ct.offsetWidth/i.baseNum;i.createImg(i.data)})}}]);return t}();